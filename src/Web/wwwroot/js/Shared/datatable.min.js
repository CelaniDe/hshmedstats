class DataTable{constructor(n,t){this.table=n;this.data=t;this.datatable=null;this.defaultOptions={order:[[0,"asc"]],paging:!0,info:!0,searching:!0,buttons:[],dom:'<"table-html-buttons"B>lTfgitp',pageLength:25}}init(n,t,i={}){var r,u;let o=this;if(r=this.defaultOptions,Object.assign(r,i),i.isReport&&(r.dom='<"report-html-buttons"B>lTfgitp'),n.length>0&&(n[n.length-1].width="12%"),this.table){if(u={data:this.data,columns:n,select:{style:"multi"},pageLength:r.pageLength,scrollX:!0,rowId:"id",rowCallback:t?t:function(){},drawCallback:function(){Ladda&&Ladda.bind(".ladda-button")}},Object.assign(u,r),r.footerCallback){let t="";n.forEach(()=>{t+="<th><\/th>"});this.table.append(`<tfoot><tr>${t}</tr></tfoot>`)}this.datatable=this.table.DataTable(u);this.datatable.columns.adjust()}$(".dt-buttons").removeClass("btn-group");$(".dataTables_scrollBody").mousemove(function(n){let r=$(document).width(),t=document.querySelector(".dataTables_scrollBody"),i={right:r-200,left:400};r<1400&&(i.left=500);t&&(n.pageX>i.right?t.scrollLeft+=15:n.pageX<i.left&&(t.scrollLeft-=15))});let e=this.table[0].id+"_filter",f=null;if($(`#${e} [type="search"]`).change(n=>{f={value:n.target.value,location:window.location.pathname},$('a.active[data-toggle="tab"]').length&&Object.assign(f,{tab:$('a.active[data-toggle="tab"]')[0].hash}),localStorage.setItem("Search",JSON.stringify(f))}),!$(".nav.nav-tabs").length){let n=JSON.parse(localStorage.getItem("Search"));n&&n.location===window.location.pathname&&n.value&&($(`#${e} [type="search"]`).val(n.value),this.datatable.search(n.value).draw())}}adjustColumns(){this.datatable.columns.adjust()}getSelectedIds(){let n=this.datatable.column(0).checkboxes.selected(),t=this.datatable.rows().data().filter(t=>Array.from(n).includes(t.id));return Array.from(t.map(n=>n.id))}createColumnLink(n,t,i,r,u,f="",e=false){let o=`/${n}/${t}?`;for(const[n,t]of Object.entries(i))o+=`${n}=${t}&`;return(u&&(o+=`returnUrl=${u}`),e)?`<a class="${f}" target="_blank" href="${o}">${r}</a>`:`<a class="${f}" href="${o}">${r}</a>`}sortAndRenderDate(n,t){if(n===null)return null;if(t==="sort")return new Date(n).getTime();var i=new Date(n);return getDateString(i)}redrawDatatable(n){this.datatable.clear().draw();this.datatable.rows.add(n).draw();this.datatable.columns.adjust()}addNewRow(n){this.datatable.row.add(n).draw()}addNewRowList(n){n.forEach(n=>this.datatable.row.add(n).draw())}removeRow(n){this.datatable.row(n).remove().draw()}destroyDatatable(){this.datatable.destroy()}}